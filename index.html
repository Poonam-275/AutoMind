<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoMind - AI-Powered Intelligent Car Companion</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .nav-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 10px;
            backdrop-filter: blur(10px);
        }

        .nav-tab {
            background: none;
            border: none;
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            cursor: pointer;
            margin: 0 5px;
            transition: all 0.3s ease;
            font-size: 1rem;
            font-weight: 500;
        }

        .nav-tab:hover {
            background: rgba(255,255,255,0.2);
        }

        .nav-tab.active {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }

        .tab-content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .feature-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
        }

        .feature-card h3 {
            color: #4a90e2;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }

        .input-group input, .input-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: #4a90e2;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 7px 20px rgba(0,0,0,0.3);
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .result-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #4a90e2;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .map-container {
            height: 400px;
            border-radius: 15px;
            background: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
            border: 2px solid #e1e5e9;
        }

        .chart-container {
            height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
        }

        .badge {
            display: inline-block;
            background: #28a745;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            margin: 5px;
        }

        .badge.bronze { background: #cd7f32; }
        .badge.silver { background: #c0c0c0; }
        .badge.gold { background: #ffd700; color: #333; }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .comparison-table th,
        .comparison-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e1e5e9;
        }

        .comparison-table th {
            background: #4a90e2;
            color: white;
            font-weight: 600;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: #e1e5e9;
            border-radius: 5px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #28a745, #20c997);
            border-radius: 5px;
            transition: width 0.3s ease;
        }

        .alert {
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .alert-info {
            background: #cce7ff;
            color: #004085;
            border: 1px solid #b3d9ff;
        }

        .floating-action {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
            color: white;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }

        .floating-action:hover {
            transform: scale(1.1);
        }

        @media (max-width: 768px) {
            .nav-tabs {
                flex-wrap: wrap;
            }
            
            .nav-tab {
                margin: 5px;
                padding: 10px 15px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-car"></i> AutoMind</h1>
            <p>AI-Powered Intelligent Car Companion</p>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('navigation')">
                <i class="fas fa-map-marked-alt"></i> Smart Navigation
            </button>
            <button class="nav-tab" onclick="showTab('compare')">
                <i class="fas fa-balance-scale"></i> CarCompare360
            </button>
            <button class="nav-tab" onclick="showTab('eco')">
                <i class="fas fa-leaf"></i> EcoGamification
            </button>
            <button class="nav-tab" onclick="showTab('dashboard')">
                <i class="fas fa-tachometer-alt"></i> Dashboard
            </button>
        </div>

        <!-- Smart Navigation Tab -->
        <div id="navigation" class="tab-content active">
            <h2><i class="fas fa-route"></i> Smart Navigation & Route Optimization</h2>
            
            <div class="feature-grid">
                <div class="feature-card">
                    <h3><i class="fas fa-map-marker-alt"></i> Route Planning</h3>
                    <div class="input-group">
                        <label for="from">From:</label>
                        <input type="text" id="from" placeholder="Enter starting location">
                    </div>
                    <div class="input-group">
                        <label for="to">To:</label>
                        <input type="text" id="to" placeholder="Enter destination">
                    </div>
                    <div class="input-group">
                        <label for="route-type">Route Type:</label>
                        <select id="route-type">
                            <option value="fastest">Fastest Route</option>
                            <option value="eco">Eco-Friendly Route</option>
                            <option value="balanced">Balanced Route</option>
                        </select>
                    </div>
                    <button class="btn" onclick="planRoute()">Plan Route</button>
                </div>

                <div class="feature-card">
                    <h3><i class="fas fa-gas-pump"></i> Fuel Cost Calculator</h3>
                    <div class="input-group">
                        <label for="distance">Distance (km):</label>
                        <input type="number" id="distance" placeholder="Enter distance">
                    </div>
                    <div class="input-group">
                        <label for="fuel-efficiency">Fuel Efficiency (km/l):</label>
                        <input type="number" id="fuel-efficiency" placeholder="Your car's mileage">
                    </div>
                    <div class="input-group">
                        <label for="fuel-price">Fuel Price (₹/L):</label>
                        <input type="number" id="fuel-price" value="105" placeholder="Current fuel price">
                    </div>
                    <button class="btn" onclick="calculateFuelCost()">Calculate Cost</button>
                    <div id="fuel-results"></div>
                </div>
            </div>

            <div class="map-container" id="map">
                <div style="text-align: center; color: #666;">
                    <i class="fas fa-map fa-3x" style="margin-bottom: 15px;"></i>
                    <p>Interactive Map with Live Traffic Data</p>
                    <p style="font-size: 0.9rem; margin-top: 10px;">Google Maps integration would be displayed here</p>
                </div>
            </div>

            <div id="route-results"></div>
        </div>

        <!-- CarCompare360 Tab -->
        <div id="compare" class="tab-content">
            <h2><i class="fas fa-cars"></i> CarCompare360 - AI-Driven Car Comparison</h2>
            
            <div class="feature-grid">
                <div class="feature-card">
                    <h3><i class="fas fa-plus"></i> Add Cars to Compare</h3>
                    <div class="input-group">
                        <label for="car-make">Make:</label>
                        <select id="car-make" onchange="updateModels()">
                            <option value="">Select Make</option>
                            <option value="maruti">Maruti Suzuki</option>
                            <option value="hyundai">Hyundai</option>
                            <option value="tata">Tata</option>
                            <option value="mahindra">Mahindra</option>
                            <option value="honda">Honda</option>
                            <option value="toyota">Toyota</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="car-model">Model:</label>
                        <select id="car-model">
                            <option value="">Select Model</option>
                        </select>
                    </div>
                    <button class="btn" onclick="addCarForComparison()">Add Car</button>
                </div>

                <div class="feature-card">
                    <h3><i class="fas fa-brain"></i> AI Recommendation Engine</h3>
                    <div class="input-group">
                        <label for="budget">Budget (₹ Lakhs):</label>
                        <input type="number" id="budget" placeholder="Enter your budget">
                    </div>
                    <div class="input-group">
                        <label for="usage">Primary Usage:</label>
                        <select id="usage">
                            <option value="city">City Driving</option>
                            <option value="highway">Highway Driving</option>
                            <option value="mixed">Mixed Usage</option>
                            <option value="family">Family Use</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="priority">Priority:</label>
                        <select id="priority">
                            <option value="fuel">Fuel Efficiency</option>
                            <option value="performance">Performance</option>
                            <option value="safety">Safety</option>
                            <option value="features">Features</option>
                        </select>
                    </div>
                    <button class="btn" onclick="getAIRecommendation()">Get AI Recommendation</button>
                </div>
            </div>

            <div id="comparison-results">
                <div class="chart-container">
                    <canvas id="comparison-chart" width="800" height="400"></canvas>
                </div>
                <div id="comparison-table"></div>
            </div>

            <div id="ai-recommendation-results"></div>
        </div>

        <!-- EcoGamification Tab -->
        <div id="eco" class="tab-content">
            <h2><i class="fas fa-seedling"></i> EcoGamification - Green Driving Rewards</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="carbon-saved">1,250</div>
                    <div>kg CO₂ Saved</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="eco-score">850</div>
                    <div>Eco Score</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="fuel-saved">₹12,500</div>
                    <div>Fuel Money Saved</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="eco-trips">47</div>
                    <div>Eco-Friendly Trips</div>
                </div>
            </div>

            <div class="feature-grid">
                <div class="feature-card">
                    <h3><i class="fas fa-trophy"></i> Your Eco Badges</h3>
                    <div id="badges-container">
                        <div class="badge gold"><i class="fas fa-medal"></i> Eco Champion</div>
                        <div class="badge silver"><i class="fas fa-leaf"></i> Green Driver</div>
                        <div class="badge bronze"><i class="fas fa-bicycle"></i> Carbon Saver</div>
                        <div class="badge"><i class="fas fa-electric-car"></i> EV Explorer</div>
                    </div>
                    <div style="margin-top: 20px;">
                        <h4>Next Badge: Eco Master</h4>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 75%;"></div>
                        </div>
                        <p style="font-size: 0.9rem; color: #666;">75% complete - Save 500kg more CO₂</p>
                    </div>
                </div>

                <div class="feature-card">
                    <h3><i class="fas fa-calculator"></i> Carbon Footprint Tracker</h3>
                    <div class="input-group">
                        <label for="trip-distance">Trip Distance (km):</label>
                        <input type="number" id="trip-distance" placeholder="Enter trip distance">
                    </div>
                    <div class="input-group">
                        <label for="vehicle-type">Vehicle Type:</label>
                        <select id="vehicle-type">
                            <option value="petrol">Petrol Car</option>
                            <option value="diesel">Diesel Car</option>
                            <option value="cng">CNG Car</option>
                            <option value="electric">Electric Car</option>
                            <option value="hybrid">Hybrid Car</option>
                        </select>
                    </div>
                    <button class="btn" onclick="trackCarbonFootprint()">Track Footprint</button>
                    <div id="carbon-results"></div>
                </div>

                <div class="feature-card">
                    <h3><i class="fas fa-bolt"></i> EV Recommendations & Subsidies</h3>
                    <div class="input-group">
                        <label for="state">State:</label>
                        <select id="state">
                            <option value="maharashtra">Maharashtra</option>
                            <option value="delhi">Delhi</option>
                            <option value="karnataka">Karnataka</option>
                            <option value="gujarat">Gujarat</option>
                            <option value="rajasthan">Rajasthan</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="ev-budget">EV Budget (₹ Lakhs):</label>
                        <input type="number" id="ev-budget" placeholder="Enter EV budget">
                    </div>
                    <button class="btn" onclick="getEVRecommendations()">Get EV Options</button>
                    <div id="ev-results"></div>
                </div>
            </div>
        </div>

        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content">
            <h2><i class="fas fa-chart-line"></i> Analytics Dashboard</h2>
            
            <div class="feature-grid">
                <div class="feature-card">
                    <h3><i class="fas fa-calendar-alt"></i> Monthly Summary</h3>
                    <canvas id="monthly-chart" width="400" height="200"></canvas>
                </div>
                
                <div class="feature-card">
                    <h3><i class="fas fa-leaf"></i> Environmental Impact</h3>
                    <canvas id="environmental-chart" width="400" height="200"></canvas>
                </div>
            </div>

            <div class="feature-card">
                <h3><i class="fas fa-history"></i> Recent Activities</h3>
                <div id="recent-activities"></div>
            </div>
        </div>
    </div>

    <button class="floating-action" onclick="showAIAssistant()" title="AI Assistant">
        <i class="fas fa-robot"></i>
    </button>

    <!-- Chart.js Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    
    <script>
        // Global variables for data storage
        let comparisonCars = [];
        let userProfile = {
            carbonSaved: 1250,
            ecoScore: 850,
            fuelSaved: 12500,
            ecoTrips: 47,
            badges: ['Eco Champion', 'Green Driver', 'Carbon Saver', 'EV Explorer']
        };

        // Car database
        const carDatabase = {
            maruti: {
                'Swift': { price: 6.5, mileage: 23.2, safety: 4, emissions: 120, maintenance: 35000 },
                'Baleno': { price: 7.5, mileage: 22.8, safety: 4, emissions: 115, maintenance: 38000 },
                'Dzire': { price: 7.0, mileage: 24.1, safety: 4, emissions: 118, maintenance: 36000 },
                'Vitara Brezza': { price: 9.5, mileage: 17.2, safety: 4, emissions: 145, maintenance: 42000 }
            },
            hyundai: {
                'i20': { price: 8.5, mileage: 20.5, safety: 5, emissions: 125, maintenance: 40000 },
                'Creta': { price: 12.5, mileage: 16.8, safety: 5, emissions: 155, maintenance: 45000 },
                'Venue': { price: 9.0, mileage: 18.2, safety: 4, emissions: 140, maintenance: 41000 },
                'Verna': { price: 11.5, mileage: 19.1, safety: 5, emissions: 135, maintenance: 43000 }
            },
            tata: {
                'Nexon': { price: 8.5, mileage: 17.5, safety: 5, emissions: 142, maintenance: 39000 },
                'Harrier': { price: 16.0, mileage: 14.2, safety: 5, emissions: 170, maintenance: 48000 },
                'Altroz': { price: 7.5, mileage: 22.1, safety: 5, emissions: 115, maintenance: 37000 },
                'Safari': { price: 18.0, mileage: 13.8, safety: 5, emissions: 180, maintenance: 52000 }
            },
            mahindra: {
                'XUV300': { price: 10.0, mileage: 17.8, safety: 5, emissions: 145, maintenance: 44000 },
                'Scorpio': { price: 14.5, mileage: 15.2, safety: 4, emissions: 165, maintenance: 47000 },
                'Thar': { price: 13.5, mileage: 12.8, safety: 4, emissions: 175, maintenance: 49000 }
            },
            honda: {
                'City': { price: 12.0, mileage: 18.4, safety: 4, emissions: 132, maintenance: 41000 },
                'Amaze': { price: 8.0, mileage: 21.5, safety: 4, emissions: 122, maintenance: 38000 },
                'WR-V': { price: 9.5, mileage: 17.9, safety: 4, emissions: 138, maintenance: 40000 }
            },
            toyota: {
                'Innova Crysta': { price: 18.5, mileage: 13.7, safety: 5, emissions: 178, maintenance: 50000 },
                'Fortuner': { price: 35.0, mileage: 11.2, safety: 5, emissions: 195, maintenance: 65000 },
                'Glanza': { price: 7.2, mileage: 22.8, safety: 4, emissions: 115, maintenance: 36000 }
            }
        };

        // EV Database
        const evDatabase = {
            'Tata Nexon EV': { price: 16.5, range: 312, charging: 8.5, subsidy: 1.5 },
            'MG ZS EV': { price: 22.5, range: 419, charging: 7.0, subsidy: 1.5 },
            'Hyundai Kona Electric': { price: 24.0, range: 452, charging: 9.0, subsidy: 1.5 },
            'Mahindra eXUV300': { price: 18.0, range: 375, charging: 8.0, subsidy: 1.5 },
            'BYD Atto 3': { price: 35.0, range: 521, charging: 7.5, subsidy: 1.5 }
        };

        // State subsidies
        const stateSubsidies = {
            maharashtra: 2.5,
            delhi: 1.5,
            karnataka: 2.0,
            gujarat: 1.5,
            rajasthan: 1.0
        };

        // Tab switching
        function showTab(tabName) {
            const tabs = document.querySelectorAll('.tab-content');
            const navTabs = document.querySelectorAll('.nav-tab');
            
            tabs.forEach(tab => tab.classList.remove('active'));
            navTabs.forEach(tab => tab.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // Update car models based on make selection
        function updateModels() {
            const make = document.getElementById('car-make').value;
            const modelSelect = document.getElementById('car-model');
            
            modelSelect.innerHTML = '<option value="">Select Model</option>';
            
            if (make && carDatabase[make]) {
                Object.keys(carDatabase[make]).forEach(model => {
                    const option = document.createElement('option');
                    option.value = model;
                    option.textContent = model;
                    modelSelect.appendChild(option);
                });
            }
        }

        // Route planning
        function planRoute() {
            const from = document.getElementById('from').value;
            const to = document.getElementById('to').value;
            const routeType = document.getElementById('route-type').value;
            
            if (!from || !to) {
                alert('Please enter both starting location and destination');
                return;
            }

            // Simulate route calculation
            const routes = {
                fastest: {
                    distance: Math.floor(Math.random() * 50 + 10),
                    time: Math.floor(Math.random() * 60 + 20),
                    fuel: Math.floor(Math.random() * 200 + 50),
                    co2: Math.floor(Math.random() * 15 + 5)
                },
                eco: {
                    distance: Math.floor(Math.random() * 55 + 12),
                    time: Math.floor(Math.random() * 70 + 25),
                    fuel: Math.floor(Math.random() * 150 + 35),
                    co2: Math.floor(Math.random() * 12 + 3)
                },
                balanced: {
                    distance: Math.floor(Math.random() * 52 + 11),
                    time: Math.floor(Math.random() * 65 + 22),
                    fuel: Math.floor(Math.random() * 175 + 42),
                    co2: Math.floor(Math.random() * 13 + 4)
                }
            };

            const route = routes[routeType];
            
            document.getElementById('route-results').innerHTML = `
                <div class="results-grid">
                    <div class="result-card">
                        <h4><i class="fas fa-route"></i> ${routeType.charAt(0).toUpperCase() + routeType.slice(1)} Route</h4>
                        <p><strong>Distance:</strong> ${route.distance} km</p>
                        <p><strong>Time:</strong> ${route.time} minutes</p>
                        <p><strong>Fuel Cost:</strong> ₹${route.fuel}</p>
                        <p><strong>CO₂ Emissions:</strong> ${route.co2} kg</p>
                    </div>
                    <div class="result-card">
                        <h4><i class="fas fa-traffic-light"></i> Live Traffic Info</h4>
                        <p><strong>Traffic Status:</strong> Moderate</p>
                        <p><strong>Delays:</strong> 5-10 minutes expected</p>
                        <p><strong>Alternative Routes:</strong> 2 available</p>
                    </div>
                </div>
            `;
        }

        // Calculate fuel cost
        function calculateFuelCost() {
            const distance = parseFloat(document.getElementById('distance').value);
            const efficiency = parseFloat(document.getElementById('fuel-efficiency').value);
            const fuelPrice = parseFloat(document.getElementById('fuel-price').value);
            
            if (!distance || !efficiency || !fuelPrice) {
                alert('Please fill all fields');
                return;
            }

            const fuelNeeded = distance / efficiency;
            const dailyCost = fuelNeeded * fuelPrice;
            const monthlyCost = dailyCost * 22; // 22 working days
            const annualCost = monthlyCost * 12;
            
            // Calculate CO2 emissions (2.31 kg CO2 per liter of petrol)
            const co2Emissions = fuelNeeded * 2.31;
            const annualCO2 = co2Emissions * 22 * 12;

            document.getElementById('fuel-results').innerHTML = `
                <div class="alert alert-info" style="margin-top: 15px;">
                    <h4><i class="fas fa-calculator"></i> Cost Analysis</h4>
                    <p><strong>Fuel Needed:</strong> ${fuelNeeded.toFixed(2)} L</p>
                    <p><strong>Trip Cost:</strong> ₹${dailyCost.toFixed(2)}</p>
                    <p><strong>Monthly Cost:</strong> ₹${monthlyCost.toFixed(2)}</p>
                    <p><strong>Annual Cost:</strong> ₹${annualCost.toFixed(2)}</p>
                    <p><strong>CO₂ Emissions:</strong> ${co2Emissions.toFixed(2)} kg per trip</p>
                    <p><strong>Annual CO₂:</strong> ${annualCO2.toFixed(2)} kg</p>
                </div>
            `;
        }

        // Add car for comparison
        function addCarForComparison() {
            const make = document.getElementById('car-make').value;
            const model = document.getElementById('car-model').value;
            
            if (!make || !model) {
                alert('Please select both make and model');
                return;
            }

            const carData = carDatabase[make][model];
            const carInfo = {
                name: `${make.charAt(0).toUpperCase() + make.slice(1)} ${model}`,
                ...carData
            };

            if (!comparisonCars.find(car => car.name === carInfo.name)) {
                comparisonCars.push(carInfo);
                updateComparisonChart();
                updateComparisonTable();
            } else {
                alert('Car already added for comparison');
            }
        }

        // Update comparison radar chart
        function updateComparisonChart() {
            const ctx = document.getElementById('comparison-chart').getContext('2d');
            
            if (window.comparisonChart) {
                window.comparisonChart.destroy();
            }

            const datasets = comparisonCars.map((car, index) => {
                const colors = ['#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF'];
                return {
                    label: car.name,
                    data: [
                        (car.price / 35) * 100, // Normalize to 100 scale
                        (car.mileage / 25) * 100,
                        (car.safety / 5) * 100,
                        ((200 - car.emissions) / 200) * 100, // Inverse for emissions
                        ((60000 - car.maintenance) / 60000) * 100 // Inverse for maintenance
                    ],
                    backgroundColor: colors[index % colors.length] + '40',
                    borderColor: colors[index % colors.length],
                    borderWidth: 2
                };
            });

            window.comparisonChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['Price', 'Mileage', 'Safety', 'Low Emissions', 'Low Maintenance'],
                    datasets: datasets
                },
                options: {
                    responsive: true,
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 100
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'Car Comparison Radar Chart'
                        }
                    }
                }
            });
        }

        // Update comparison table
        function updateComparisonTable() {
            if (comparisonCars.length === 0) return;

            let tableHTML = `
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Car Model</th>
                            <th>Price (₹ Lakhs)</th>
                            <th>Mileage (km/l)</th>
                            <th>Safety Rating</th>
                            <th>CO₂ (g/km)</th>
                            <th>Maintenance (₹/year)</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
            `;

            comparisonCars.forEach((car, index) => {
                tableHTML += `
                    <tr>
                        <td><strong>${car.name}</strong></td>
                        <td>₹${car.price}</td>
                        <td>${car.mileage}</td>
                        <td>${'★'.repeat(car.safety)}${'☆'.repeat(5-car.safety)}</td>
                        <td>${car.emissions}</td>
                        <td>₹${car.maintenance.toLocaleString()}</td>
                        <td><button onclick="removeCarFromComparison(${index})" style="background: #dc3545; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer;">Remove</button></td>
                    </tr>
                `;
            });

            tableHTML += '</tbody></table>';
            document.getElementById('comparison-table').innerHTML = tableHTML;
        }

        // Remove car from comparison
        function removeCarFromComparison(index) {
            comparisonCars.splice(index, 1);
            updateComparisonChart();
            updateComparisonTable();
        }

        // AI Recommendation Engine
        function getAIRecommendation() {
            const budget = parseFloat(document.getElementById('budget').value);
            const usage = document.getElementById('usage').value;
            const priority = document.getElementById('priority').value;
            
            if (!budget) {
                alert('Please enter your budget');
                return;
            }

            // AI algorithm to find best matches
            let recommendations = [];
            
            Object.keys(carDatabase).forEach(make => {
                Object.keys(carDatabase[make]).forEach(model => {
                    const car = carDatabase[make][model];
                    if (car.price <= budget) {
                        let score = 0;
                        
                        // Score based on priority
                        switch (priority) {
                            case 'fuel':
                                score = car.mileage * 4;
                                break;
                            case 'performance':
                                score = (car.price / budget) * 100;
                                break;
                            case 'safety':
                                score = car.safety * 20;
                                break;
                            case 'features':
                                score = (car.price / budget) * 50 + car.safety * 10;
                                break;
                        }
                        
                        // Usage factor
                        if (usage === 'city' && car.mileage > 20) score += 20;
                        if (usage === 'highway' && car.mileage > 15) score += 15;
                        if (usage === 'family' && car.safety >= 4) score += 25;
                        
                        recommendations.push({
                            name: `${make.charAt(0).toUpperCase() + make.slice(1)} ${model}`,
                            score: score,
                            ...car
                        });
                    }
                });
            });

            recommendations.sort((a, b) => b.score - a.score);
            recommendations = recommendations.slice(0, 3);

            let resultsHTML = '<div class="alert alert-success"><h3><i class="fas fa-robot"></i> AI Recommendations</h3>';
            
            recommendations.forEach((car, index) => {
                const rank = ['🥇', '🥈', '🥉'][index];
                resultsHTML += `
                    <div class="result-card" style="margin: 15px 0;">
                        <h4>${rank} ${car.name}</h4>
                        <p><strong>Price:</strong> ₹${car.price} Lakhs | <strong>Mileage:</strong> ${car.mileage} km/l</p>
                        <p><strong>Safety:</strong> ${car.safety}/5 | <strong>Match Score:</strong> ${Math.round(car.score)}/100</p>
                        <p><strong>Why recommended:</strong> ${getRecommendationReason(car, priority, usage)}</p>
                    </div>
                `;
            });
            
            resultsHTML += '</div>';
            document.getElementById('ai-recommendation-results').innerHTML = resultsHTML;
        }

        function getRecommendationReason(car, priority, usage) {
            const reasons = [];
            if (car.mileage > 20) reasons.push('excellent fuel efficiency');
            if (car.safety >= 5) reasons.push('top safety rating');
            if (car.emissions < 130) reasons.push('low emissions');
            if (priority === 'fuel' && car.mileage > 22) reasons.push('matches your fuel priority');
            if (usage === 'family' && car.safety >= 4) reasons.push('family-friendly safety features');
            
            return reasons.slice(0, 2).join(', ') || 'good overall value';
        }

        // Carbon footprint tracking
        function trackCarbonFootprint() {
            const distance = parseFloat(document.getElementById('trip-distance').value);
            const vehicleType = document.getElementById('vehicle-type').value;
            
            if (!distance) {
                alert('Please enter trip distance');
                return;
            }

            const emissionFactors = {
                petrol: 2.31, // kg CO2 per liter
                diesel: 2.68,
                cng: 1.85,
                electric: 0.1, // considering electricity generation
                hybrid: 1.5
            };

            const fuelEfficiency = {
                petrol: 15,
                diesel: 18,
                cng: 20,
                electric: 100, // km per unit
                hybrid: 25
            };

            const fuelNeeded = distance / fuelEfficiency[vehicleType];
            const co2Produced = fuelNeeded * emissionFactors[vehicleType];
            const cost = vehicleType === 'electric' ? fuelNeeded * 8 : fuelNeeded * 105;

            // Calculate potential savings vs petrol car
            const petrolCO2 = (distance / 15) * 2.31;
            const co2Saved = petrolCO2 - co2Produced;

            document.getElementById('carbon-results').innerHTML = `
                <div class="alert alert-success" style="margin-top: 15px;">
                    <h4><i class="fas fa-leaf"></i> Carbon Footprint Analysis</h4>
                    <p><strong>Trip Emissions:</strong> ${co2Produced.toFixed(2)} kg CO₂</p>
                    <p><strong>Trip Cost:</strong> ₹${cost.toFixed(2)}</p>
                    <p><strong>CO₂ Saved vs Petrol:</strong> ${co2Saved.toFixed(2)} kg</p>
                    <p><strong>Environmental Impact:</strong> ${co2Produced < 5 ? 'Excellent' : co2Produced < 10 ? 'Good' : 'Consider eco-friendly options'}</p>
                </div>
            `;

            // Update user profile
            if (co2Saved > 0) {
                userProfile.carbonSaved += co2Saved;
                userProfile.ecoScore += Math.floor(co2Saved * 10);
                updateEcoStats();
            }
        }

        // Get EV recommendations
        function getEVRecommendations() {
            const state = document.getElementById('state').value;
            const budget = parseFloat(document.getElementById('ev-budget').value);
            
            if (!budget) {
                alert('Please enter your EV budget');
                return;
            }

            const stateSubsidy = stateSubsidies[state] || 1.0;
            let recommendations = [];

            Object.keys(evDatabase).forEach(model => {
                const ev = evDatabase[model];
                const finalPrice = ev.price - ev.subsidy - stateSubsidy;
                
                if (finalPrice <= budget) {
                    recommendations.push({
                        name: model,
                        ...ev,
                        finalPrice: finalPrice,
                        totalSubsidy: ev.subsidy + stateSubsidy
                    });
                }
            });

            recommendations.sort((a, b) => b.range - a.range);

            let resultsHTML = `
                <div class="alert alert-info" style="margin-top: 15px;">
                    <h4><i class="fas fa-electric-car"></i> EV Recommendations for ${state.charAt(0).toUpperCase() + state.slice(1)}</h4>
                    <p><strong>State Subsidy:</strong> ₹${stateSubsidy} Lakhs</p>
            `;

            if (recommendations.length === 0) {
                resultsHTML += '<p>No EVs available in your budget. Consider increasing budget or check for upcoming models.</p>';
            } else {
                recommendations.forEach(ev => {
                    resultsHTML += `
                        <div class="result-card" style="margin: 10px 0;">
                            <h5>${ev.name}</h5>
                            <p><strong>Original Price:</strong> ₹${ev.price} Lakhs</p>
                            <p><strong>After Subsidies:</strong> ₹${ev.finalPrice.toFixed(1)} Lakhs (Save ₹${ev.totalSubsidy.toFixed(1)} Lakhs)</p>
                            <p><strong>Range:</strong> ${ev.range} km | <strong>Charging Time:</strong> ${ev.charging} hours</p>
                            <p><strong>Annual Savings:</strong> ₹${((15000 / 15) * 105 - (15000 / 4) * 8).toFixed(0)} vs petrol car</p>
                        </div>
                    `;
                });
            }
            
            resultsHTML += '</div>';
            document.getElementById('ev-results').innerHTML = resultsHTML;
        }

        // Update eco stats
        function updateEcoStats() {
            document.getElementById('carbon-saved').textContent = Math.round(userProfile.carbonSaved).toLocaleString();
            document.getElementById('eco-score').textContent = userProfile.ecoScore.toLocaleString();
            document.getElementById('fuel-saved').textContent = `₹${userProfile.fuelSaved.toLocaleString()}`;
            document.getElementById('eco-trips').textContent = userProfile.ecoTrips;
        }

        // AI Assistant
        function showAIAssistant() {
            const responses = [
                "🚗 Tip: Regular maintenance can improve your car's fuel efficiency by up to 10%!",
                "🌱 Consider carpooling or using public transport for short trips to reduce your carbon footprint.",
                "⚡ Did you know? EVs have 3x lower running costs compared to petrol cars in India.",
                "🛣️ Avoid peak traffic hours to save fuel and reduce emissions by up to 25%.",
                "🔋 Plan your EV charging during off-peak hours to save on electricity costs.",
                "🏆 You're doing great! Keep up your eco-friendly driving habits.",
                "💡 Tip: Maintain optimal tire pressure to improve fuel efficiency by 3-4%."
            ];
            
            const randomTip = responses[Math.floor(Math.random() * responses.length)];
            alert(`AutoMind AI Assistant says:\n\n${randomTip}`);
        }

        // Initialize charts when page loads
        window.onload = function() {
            initializeDashboardCharts();
            loadRecentActivities();
        };

        // Initialize dashboard charts
        function initializeDashboardCharts() {
            // Monthly summary chart
            const monthlyCtx = document.getElementById('monthly-chart').getContext('2d');
            new Chart(monthlyCtx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [{
                        label: 'Fuel Cost (₹)',
                        data: [3200, 2950, 3100, 2800, 2650, 2400],
                        borderColor: '#FF6384',
                        backgroundColor: '#FF638440',
                        tension: 0.4
                    }, {
                        label: 'CO₂ Emissions (kg)',
                        data: [145, 135, 140, 128, 120, 115],
                        borderColor: '#36A2EB',
                        backgroundColor: '#36A2EB40',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Monthly Trends'
                        }
                    }
                }
            });

            // Environmental impact chart
            const envCtx = document.getElementById('environmental-chart').getContext('2d');
            new Chart(envCtx, {
                type: 'doughnut',
                data: {
                    labels: ['CO₂ Saved', 'Still Emitting'],
                    datasets: [{
                        data: [1250, 850],
                        backgroundColor: ['#28a745', '#dc3545'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Carbon Impact (kg CO₂)'
                        }
                    }
                }
            });
        }

        // Load recent activities
        function loadRecentActivities() {
            const activities = [
                { icon: 'fa-route', text: 'Completed eco-friendly route to Mumbai Airport', time: '2 hours ago', type: 'success' },
                { icon: 'fa-medal', text: 'Earned "Green Driver" badge for 10 eco trips', time: '1 day ago', type: 'success' },
                { icon: 'fa-car-crash', text: 'Safety alert: Heavy traffic detected on Western Express Highway', time: '3 hours ago', type: 'warning' },
                { icon: 'fa-leaf', text: 'Saved 15kg CO₂ this week through efficient driving', time: '2 days ago', type: 'success' },
                { icon: 'fa-charging-station', text: 'New EV charging station added near your location', time: '3 days ago', type: 'info' }
            ];

            let activitiesHTML = '';
            activities.forEach(activity => {
                const iconColor = activity.type === 'success' ? '#28a745' : activity.type === 'warning' ? '#ffc107' : '#17a2b8';
                activitiesHTML += `
                    <div style="display: flex; align-items: center; padding: 15px; border-bottom: 1px solid #eee;">
                        <i class="fas ${activity.icon}" style="color: ${iconColor}; margin-right: 15px; font-size: 1.2rem;"></i>
                        <div style="flex: 1;">
                            <p style="margin-bottom: 5px;">${activity.text}</p>
                            <small style="color: #666;">${activity.time}</small>
                        </div>
                    </div>
                `;
            });

            document.getElementById('recent-activities').innerHTML = activitiesHTML;
        }

        // Simulate live traffic updates
        setInterval(() => {
            const trafficStatus = ['Light', 'Moderate', 'Heavy'][Math.floor(Math.random() * 3)];
            const mapElement = document.getElementById('map');
            if (mapElement && mapElement.innerHTML.includes('Interactive Map')) {
                mapElement.innerHTML = `
                    <div style="text-align: center; color: #666;">
                        <i class="fas fa-traffic-light fa-3x" style="margin-bottom: 15px; color: ${trafficStatus === 'Light' ? '#28a745' : trafficStatus === 'Moderate' ? '#ffc107' : '#dc3545'};"></i>
                        <p>Live Traffic Status: <strong>${trafficStatus}</strong></p>
                        <p style="font-size: 0.9rem; margin-top: 10px;">Real-time Google Maps integration</p>
                        <p style="font-size: 0.8rem; color: #999;">Last updated: ${new Date().toLocaleTimeString()}</p>
                    </div>
                `;
            }
        }, 10000);
    </script>
</body>
</html>